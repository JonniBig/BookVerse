import{a as y}from"./mobileMenuBurger-4fd26da8.js";async function L(e){if(e.toLowerCase()==="all categories"){window.location.href="index.html";return}const o=`https://books-backend.p.goit.global/books/category?category=${e}`;try{const r=(await y.get(o)).data,n=document.getElementById("result-container");n.innerHTML="";const s=e.split(" ");if(s.length>1){const c=s.pop();s.push(`<span style="color: #4F2EE8;">${c}</span>`)}const v=s.join(" "),g=document.createElement("h2");if(g.classList.add("title_books"),g.innerHTML=v,n.appendChild(g),r.length===0){const c=document.createElement("p");c.classList.add("categoryesNotFound"),c.textContent="Вибраної категорії не існує. Виберіть іншу категорію.",n.appendChild(c)}else{const c=document.createElement("ul");c.className="bestseller",r.forEach(l=>{const i=document.createElement("li");i.className="book-item",i.id=`book-${l._id}`;const d=document.createElement("a");d.href="/book-details.html?id="+l._id;const b=document.createElement("div"),u=document.createElement("img");u.classList.add("book-wrap"),u.src=l.book_image||"../images/plug picture/plug335x485@1x.jpg",u.alt=l.title,b.appendChild(u);const m=document.createElement("div");m.classList.add("noName");const h=document.createElement("p");h.classList.add("book-name"),h.textContent=l.title||"N/A";const k=document.createElement("p");k.classList.add("book-author"),k.textContent=l.author||"N/A",m.appendChild(h),m.appendChild(k),d.appendChild(b),d.appendChild(m),i.appendChild(d),c.appendChild(i)}),n.appendChild(c)}}catch(a){console.error("Error fetching books:",a)}}const p=document.querySelector(".bestseller"),B="https://books-backend.p.goit.global/books/top-books";async function E(){return(await y.get(B)).data}E();async function M(e){try{(await E(e)).map(o=>S(o))}catch{console.error("Try again!")}}M();function S(e){const{list_name:t,books:o}=e,a=`
  <div class="best-list">
    <h2 class="best-list-name">${t}</h2>
      <ul class="best-book-category">
         ${o.map(r=>$(r)).join("")}
      </ul>
      <button type="button" class="see-more" data-category="${t}">SEE MORE</button>
  </div>
  `;p.insertAdjacentHTML("beforeend",a),_()}function _(){p._seeMoreBound||(p.addEventListener("click",async e=>{if(e.target.classList.contains("see-more")){const t=e.target.getAttribute("data-category");try{await L(t)}catch(o){console.error("Error handling book click:",o)}}}),p._seeMoreBound=!0)}function $({book_image:e,title:t,author:o,_id:a}){return`
  <li class="book-item" id="${a}">
    <img class="book-wrap" src="${e}" alt="${t}"/>
      <div>
        <p class="book-name">${t}</p>
        <p class="book-author">${o}</p>
      </div>
  </li>`}(()=>{const e={openModalBtn:document.querySelector("#openModalLink"),closeModalBtn:document.querySelector(".modalWindow-btn"),modalWindow:document.querySelector(".modalWindow")};e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t);function t(){e.modalWindow.classList.toggle("is-hidden")}})();const A="https://books-backend.p.goit.global/",f=document.querySelector(".categories");async function x(){try{const{data:e}=await y.get(`${A}books/category-list`),t={list_name:"All categories"};e.unshift(t),T(e);const o=e[0].categoryLink;o&&o.classList.add("active-category")}catch(e){console.error("Помилка при отриманні категорій:",e)}}async function T(e){f.innerHTML="";const t=document.createElement("ul");t.classList.add("book_list"),e.forEach(o=>{const{list_name:a}=o,r=document.createElement("li");r.classList.add("category_item");const n=document.createElement("a");n.textContent=a,n.addEventListener("click",async()=>{await L(a),e.forEach(s=>{s.categoryLink.classList.remove("active-category")}),n.classList.add("active-category")}),n.classList.add("category_link"),["focus","blur","mouseover","mouseout"].forEach(s=>{n.addEventListener(s,()=>{s==="focus"||s==="mouseover"?n.classList.add("uppercase"):n.classList.remove("uppercase")})}),o.categoryLink=n,r.appendChild(n),t.appendChild(r)}),f.appendChild(t)}x();const C=document.querySelector(".go-top");window.addEventListener("scroll",q);C.addEventListener("click",w);function q(){const e=document.documentElement.scrollTop,t=document.documentElement.clientHeight;C.classList.toggle("show",e>t)}function w(){document.documentElement.scrollTop>0&&(window.scrollBy(0,-40),requestAnimationFrame(w))}
