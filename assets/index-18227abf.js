import{a as h}from"./mobileMenuBurger-4fd26da8.js";async function E(e){if(e.toLowerCase()==="all categories"){window.location.href="index.html";return}const o=`https://books-backend.p.goit.global/books/category?category=${e}`;try{const n=(await h.get(o)).data,s=document.getElementById("result-container");s.innerHTML="";const a=e.split(" ");if(a.length>1){const r=a.pop();a.push(`<span style="color: #4F2EE8;">${r}</span>`)}const B=a.join(" "),p=document.createElement("h2");if(p.classList.add("title-books"),p.innerHTML=B,s.appendChild(p),n.length===0){const r=document.createElement("p");r.classList.add("categoryesNotFound"),r.textContent="Вибраної категорії не існує. Виберіть іншу категорію.",s.appendChild(r)}else{const r=document.createElement("ul");r.className="bestseller",n.forEach(l=>{const i=document.createElement("li");i.className="book-item",i.id=`${l._id}`;const d=document.createElement("a");d.href="/book-details.html?id="+l._id;const k=document.createElement("div"),u=document.createElement("img");u.classList.add("book-wrap"),u.src=l.book_image||"../images/plug picture/plug335x485@1x.jpg",u.alt=l.title,k.appendChild(u);const m=document.createElement("div");m.classList.add("noName");const g=document.createElement("p");g.classList.add("book-name"),g.textContent=l.title||"N/A";const y=document.createElement("p");y.classList.add("book-author"),y.textContent=l.author||"N/A",m.appendChild(g),m.appendChild(y),d.appendChild(k),d.appendChild(m),i.appendChild(d),r.appendChild(i)}),s.appendChild(r)}const f=document.querySelector(`li[data-category="${e}"]`);f&&f.classList.add("active-category")}catch(c){console.error("Error fetching books:",c)}}const b=document.querySelector(".bestseller"),M="https://books-backend.p.goit.global/books/top-books";async function C(){return(await h.get(M)).data}C();async function S(e){try{(await C(e)).map(o=>$(o))}catch{console.error("Try again!")}}S();function $(e){const{list_name:t,books:o}=e,c=`
  <div class="best-list">
    <h2 class="best-list-name">${t}</h2>
      <ul class="best-book-category">
         ${o.map(n=>A(n)).join("")}
      </ul>
      <button type="button" class="see-more" data-category="${t}">SEE MORE</button>
  </div>
  `;b.insertAdjacentHTML("beforeend",c),_()}function _(){if(b._seeMoreBound)return;document.querySelectorAll(".see-more").forEach(t=>{t.addEventListener("click",()=>{const o=t.getAttribute("data-category");E(o),document.querySelectorAll(".categories .category_link").forEach(n=>{n.textContent===o?n.classList.add("active-category"):n.classList.remove("active-category")})})})}function A({book_image:e,title:t,author:o,_id:c}){return`
  <li class="book-item" id="${c}">
    <img class="book-wrap" src="${e}" alt="${t}"/>
      <div>
        <p class="book-name">${t}</p>
        <p class="book-author">${o}</p>
      </div>
  </li>`}(()=>{const e={openModalBtn:document.querySelector("#openModalLink"),closeModalBtn:document.querySelector(".modalWindow-btn"),modalWindow:document.querySelector(".modalWindow")};e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t);function t(){e.modalWindow.classList.toggle("is-hidden")}})();const q="https://books-backend.p.goit.global/",L=document.querySelector(".categories");async function x(){try{const{data:e}=await h.get(`${q}books/category-list`),t={list_name:"All categories"};e.unshift(t),T(e);const o=e[0].categoryLink;o&&o.classList.add("active-category")}catch(e){console.error("Помилка при отриманні категорій:",e)}}async function T(e){L.innerHTML="";const t=document.createElement("ul");t.classList.add("book_list"),e.forEach(o=>{const{list_name:c}=o,n=document.createElement("li");n.classList.add("category_item");const s=document.createElement("a");s.textContent=c,s.addEventListener("click",async()=>{await E(c),e.forEach(a=>{a.categoryLink.classList.remove("active-category")}),s.classList.add("active-category")}),s.classList.add("category_link"),["focus","blur","mouseover","mouseout"].forEach(a=>{s.addEventListener(a,()=>{a==="focus"||a==="mouseover"?s.classList.add("uppercase"):s.classList.remove("uppercase")})}),o.categoryLink=s,n.appendChild(s),t.appendChild(n)}),L.appendChild(t)}x();const v=document.querySelector(".go-top");window.addEventListener("scroll",N);v.addEventListener("click",w);function N(){const e=document.documentElement.scrollTop,t=document.documentElement.clientHeight;v.classList.toggle("show",e>t)}function w(){document.documentElement.scrollTop>0&&(window.scrollBy(0,-40),requestAnimationFrame(w))}
